<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Check Out Page</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="./src/css/main.css">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar ">
        <!-- Navabr links -->
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="index.html">Catalogue</a></li>
            <li><a href="">About</a></li>
        </ul>
        <!-- Top Nav Icons -->
        <div>
            <a href="#cart-modal" class="modal-trigger">
                <i class="material-icons">shopping_cart</i>
            </a>

            <!-- Modal Structure -->
            <div id="cart-modal" class="modal">
                <div class="modal-title">
                    <h5>Your Cart</h5>
                </div>
                <div class="modal-content cart-content">
                    <!-- Single Item in cart - Cart items can be appended to the cart content class -->
                    <item>
                        <div id="cart-container modal-content1" class="fw">
                            <!-- <span class="close">&times;</span> -->
                            <ul id="show-cart">
                                <li>???????</li>
                            </ul>


                            <!--Default Cart-->
                            <div class="hard-coded">
                                <div>
                                    <div>You have <span id="count-cart">X</span> items in your cart</div>
                                    <div>Total Cart: R<span id="total-cart"></span></div>
                                </div>
                                <button id="clear-cart" class="waves-effect waves-light btn-large blue-grey">
                                    <i class="material-icons left">clear</i>
                                    Clear Cart
                                </button>
                                <br>
                                <a href="checkout.html"><button id="checkout-cart" class="waves-effect waves-light btn-large blue-grey">
                                    
                                    Checkout
                                </button></a>
                                <button onclick="lockdownDiscount()" id="discount-cart" class="waves-effect waves-light btn-large blue-grey">
                                    
                                    R50 Lockdown Discount
                                </button>
                            </div>
                        </div>
                    </item>
                </div>
                <div class="modal-footer">
                    <a href="#!" class="modal-close waves-effect waves-green btn-flat"></a><i class="material-icons close">close</i></a>
                </div>
            </div>
        </div>
    </nav>

    <!--Checkout form-->

     <!--Display Cart-->
     <div class="container">
        <div class="py-5 text-center">
          
          <h2>Checkout</h2>
          <p class="lead">Please Fill In The Information Below To complete Checkout.</p>
        </div>
      
        
        <div class="row">
          <div class="col-md-4 order-md-2 mb-4">
            <h4 class="d-flex justify-content-between align-items-center mb-3">
                
              <span class="text-muted">Your cart</span>
              <span class="cart-total badge badge-secondary badge-pill">0</span>
            </h4>
            <ul class="list-group mb-3">
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  
                  <div class="cart-content"><button onload="displayCart()">Calculate Order Total</button></div>
            
              
              <!--Total-->
             
              <li class="list-group-item d-flex justify-content-between">
                <div>Total Cart: R<span id="total-cart"></span></div>
                <strong class="orderTotal"></strong>
              </li>
            </ul>
          
      
            <form class="card p-2">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Promo code">
                <div class="input-group-append">
                  <button type="submit" class="btn btn-secondary">Redeem</button>
                </div>
              </div>
            </form>
          </div>
          
          <div class="col-md-8 order-md-1">
            <h4 class="mb-3">Billing address</h4>
            <form class="needs-validation" novalidate>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="firstName">First name</label>
                  <input type="text" class="form-control" id="firstName" placeholder="" value="" required>
                  <div class="invalid-feedback">
                    Valid first name is required.
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="lastName">Last name</label>
                  <input type="text" class="form-control" id="lastName" placeholder="" value="" required>
                  <div class="invalid-feedback">
                    Valid last name is required.
                  </div>
                </div>
              </div>
      
              <!--Email Address-->
      
              <div class="mb-3">
                <label for="email">Email <span class="text-muted">(Optional)</span></label>
                <input type="email" class="form-control" id="email" placeholder="you@example.com">
                <div class="invalid-feedback">
                  Please enter a valid email address for shipping updates.
                </div>
              </div>
      <!--Shipping Address-->
              <div class="mb-3">
                <label for="address">Address</label>
                <input type="text" class="form-control" id="address" placeholder="1234 Main St" required>
                <div class="invalid-feedback">
                  Please enter your shipping address.
                </div>
              </div>
      
              <div class="mb-3">
                <label for="address2">Address 2 <span class="text-muted">(Optional)</span></label>
                <input type="text" class="form-control" id="address2" placeholder="Apartment or suite">
              </div>
      
              <div class="row">
                <div class="col-md-5 mb-3">
                  <label for="country">Country</label>
                  <select class="custom-select d-block w-100" id="country" required>
                    <option value="">Choose...</option>
                    <option>South Africa</option>
                    <option>United States</option>
                    <option>United Kingdom</option>
                  </select>
                  <div class="invalid-feedback">
                    Please select a valid country.
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <label for="state">Province</label>
                  <select class="custom-select d-block w-100" id="state" required>
                    <option value="">Choose...</option>
                    <option>Gauteng</option>
                    <option>Free State</option>
                    <option>Eastern Cape</option>
                    <option>KwaZulu-Natal</option>
                    <option>Limpopo</option>
                    <option>Mpumalanga</option>
                    <option>North West</option>
                    <option>Northern Cape</option>
                    <option>Western Cape</option>
                  </select>
                  <div class="invalid-feedback">
                    Please provide a valid Province.
                  </div>
                </div>
                <div class="col-md-3 mb-3">
                  <label for="zip">Postal Code</label>
                  <input type="text" class="form-control" id="zip" placeholder="" required>
                  <div class="invalid-feedback">
                    Postal Code required
                  </div>
                </div>
              </div>

              <div class="col-md-3 mb-3">
                <label for="state">Shipping Options</label>
                <select class="custom-select d-block w-100" id="DeliveryOption" required>
                  <option value="">Choose...</option>
                  <option value="100" id="expressDelivery">Express(1-2 Day Delivery): R100</option>
                  <option value="40" id="standardDelivery">Standard(2-4 Day Delivery): R40</option>
                  <option id="collectionDelivery">Collection: Free</option>
                  
                </select>
                <div class="invalid-feedback">
                  Please provide a valid Shipping Option
                </div>
              </div>
              <div class="col-md-2 mb-3">
                <label for="state">Discount Voucher</label>
                <select class="custom-select d-block w-100" id="Discount" required>
                  <option value="">Choose...</option>
                  <option value="150" id="newCustomerDiscount">New Customer Discount: R150</option>
                  <option value="50" id="lockdownDiscount">Lockdown Discount: R50</option>
                  
                  
                </select>
                <div class="invalid-feedback">
                  Please provide a valid Discount Option.
                </div>
              </div>

              <hr class="mb-4">
      
              <h4 class="mb-3">Payment</h4>
      
              <div class="d-block my-3">
                <div class="custom-control custom-radio">
                  <input id="credit" name="paymentMethod" type="radio" class="custom-control-input" checked required>
                  <label class="custom-control-label" for="credit">Credit card</label>
                </div>
                <div class="custom-control custom-radio">
                  <input id="debit" name="paymentMethod" type="radio" class="custom-control-input" required>
                  <label class="custom-control-label" for="debit">Debit card</label>
                </div>
                <div class="custom-control custom-radio">
                  <input id="paypal" name="paymentMethod" type="radio" class="custom-control-input" required>
                  <label class="custom-control-label" for="paypal">PayPal</label>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="cc-name">Name on card</label>
                  <input type="text" class="form-control" id="cc-name" placeholder="" required>
                  <small class="text-muted">Full name as displayed on card</small>
                  <div class="invalid-feedback">
                    Name on card is required
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="cc-number">Credit card number</label>
                  <input type="text" class="form-control" id="cc-number" placeholder="" required>
                  <div class="invalid-feedback">
                    Credit card number is required
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3 mb-3">
                  <label for="cc-expiration">Expiration</label>
                  <input type="text" class="form-control" id="cc-expiration" placeholder="" required>
                  <div class="invalid-feedback">
                    Expiration date required
                  </div>
                </div>
                <div class="col-md-3 mb-3">
                  <label for="cc-cvv">CVV</label>
                  <input type="text" class="form-control" id="cc-cvv" placeholder="" required>
                  <div class="invalid-feedback">
                    Security code required
                  </div>
                </div>
              </div>
              <hr class="mb-4">
              <button onclick="generateRef()" id="generate" class="btn btn-primary btn-lg btn-block" type="submit">Confirm Order</button>
              
            </form>
          </div>
        </div>
      
        <footer class="my-5 pt-5 text-muted text-center text-small">
          <p class="mb-1">&copy; 2017-2019 Company Name</p>
          <ul class="list-inline">
            <li class="list-inline-item"><a href="#">Privacy</a></li>
            <li class="list-inline-item"><a href="#">Terms</a></li>
            <li class="list-inline-item"><a href="#">Support</a></li>
          </ul>
        </footer>
      </div>

















    <script src="./src/js/cartStorage.js"></script>
    <!--JavaScript at end of body for optimized loading-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Load dynamic data -->
    <!-- <script src="./src/js/main.js"></script> -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modalClass = document.querySelectorAll('.modal');
            const newModal = M.Modal.init(modalClass);
        });
    </script>
    <!-- Cart Script  -->
    <script>
        $(".add-to-cart").click(function(event) {
            event.preventDefault();
            var name = $(this).attr("data-name");
            var price = Number($(this).attr("data-price"));

            shoppingCart.addItemToCart(name, price, 1);
            displayCart();
        });

        $("#clear-cart").click(function(event) {
            shoppingCart.clearCart();
            displayCart();
        });

        function displayCart() {
            var cartArray = shoppingCart.listCart();
            console.log(cartArray);
            var output = "";

            for (var i in cartArray) {
                output += `
                <item>
                    <div class="details">
                        <h6>${cartArray[i].name}</h6> 
                        <p>R${cartArray[i].price}</p>
                    </div>
                    <div class="qty-change">
                        <!-- qty incremment -->
                        <button class='plus-item btn-floating btn-medium waves-effect waves-light transparent' data-name='${cartArray[i].name}'>
                            <i class="material-icons">expand_less</i>
                        </button>
                        <!-- Current Quantity -->
                        <span>${cartArray[i].count}</span>
                        <!-- qty decremment -->
                        <button class='subtract-item btn-floating btn-medium waves-effect waves-light transparent' data-name='${cartArray[i].name}'>
                            <i class="material-icons">expand_more</i>
                        </button> 
                        <button class='delete-item btn-floating btn-medium waves-effect waves-light red flat' data-name='${cartArray[i].name}'>
                            <i class="material-icons" style="color: white">clear</i>    
                        </button>
                    </div>
                </item>
                `;
            }

            $("#show-cart").html(output);
            $("#count-cart").html(shoppingCart.countCart());
            $("#total-cart").html(shoppingCart.totalCart());
        }

        $("#show-cart").on("click", ".delete-item", function(event) {
            var name = $(this).attr("data-name");
            shoppingCart.removeItemFromCartAll(name);
            displayCart();
        });

        $("#show-cart").on("click", ".subtract-item", function(event) {
            var name = $(this).attr("data-name");
            shoppingCart.removeItemFromCart(name);
            displayCart();
        });

        $("#show-cart").on("click", ".plus-item", function(event) {
            var name = $(this).attr("data-name");
            shoppingCart.addItemToCart(name, 0, 1);
            displayCart();
        });

        $("#show-cart").on("change", ".item-count", function(event) {
            var name = $(this).attr("data-name");
            var count = Number($(this).val());
            shoppingCart.setCountForItem(name, count);
            displayCart();
        });


        displayCart();

        
    </script>

    <!-- Snack Bar code  -->
    <script>
        function myFunction() {
            var x = document.getElementById("snackbar");
            x.className = "show";
            setTimeout(function() {
                x.className = x.className.replace("show", "");
            }, 3000);
        }
    </script>

</body>

</html>